<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>05 Exceptions and Extensions</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">05 Exceptions and Extensions</h1>
</header>
<h2 id="exceptions-and-extensions">Exceptions and Extensions</h2>
<h3 id="task-1-introduction">Task 1: Introduction</h3>
<p>In this workbook, we will add some extensions to the OXO game that
you started in the previous workbook. The tasks in this workbook focus
on handling errors and implementing some advanced extensions to the
basic OXO game.</p>
<h1 id="section"></h1>
<h3 id="task-2-error-handling-in-java">Task 2: Error Handling in
Java</h3>
<p><a href='02%20Error%20Handling%20in%20Java/slides/segment-1.pdf' target='_blank'>
<img src="../../resources/icons/slides.png" /> </a>
<a href='02%20Error%20Handling%20in%20Java/video/segment-1.mp4' target='_blank'>
<img src="../../resources/icons/video.png" /> </a>
<a href='02%20Error%20Handling%20in%20Java/deep/segment-1.pdf' target='_blank'>
<img src="../../resources/icons/deep.png" /> </a>
<a href='02%20Error%20Handling%20in%20Java/deep/segment-1.mp4' target='_blank'>
<img src="../../resources/icons/deep.png" /> </a></p>
<p>It is more than possible that a user will at some point make a
mistake and input a “bad” cell identifier (for example, a cell that
doesn’t exist or one that has already been claimed by one of the
players). In Java, handling these kinds of unintended run-time errors is
achieved using a language feature called <strong>Exceptions</strong>.
This includes a set of special classes and an error handling mechanism
that is part of the Java programming language itself. View the slides
and video above to gain an understanding of the concept of exceptions
and to see a demonstration of exceptions in action.</p>
<p>When making use of exceptions in our OXO game, we first need to
appreciate the range of the different types of user input error that are
possible. These include the following:</p>
<ul>
<li>Invalid Identifier Length: The entire identifier string is longer
(or shorter) than the required two characters</li>
<li>Invalid Identifier Character: The row character is not alphabetic or
the column character is not numerical</li>
<li>Outside Range: The identifiers are valid, but they are out the range
of the board size (i.e. too big or too small)</li>
<li>Already Taken: The specified cell exists, but it has already been
claimed by a player</li>
</ul>
<p>Note that these input errors are listed in order of precedence
(i.e. when processing an incoming command, you should check for the
errors in the order listed above). The reason for this is that there are
some situations where an inputted command falls under more than one
class of error - in these situations, you should use the first error
type detected.</p>
<p>To help you to handle user input errors in your OXO game, we have
provided you with a set of exception classes that can be used to
represent each of the above types of error. Note that all of these
exceptions can be found inside the <code>OXOMoveException</code> file in
the template project’s <code>src</code> folder. At the beginning of this
unit we said that there is <em>normally</em> a one-to-one mapping
between a file and a class. In this situation however we break this
convention in the interests of a tidy file system ! Each exception class
is very short and as such don’t warrant individual files of their
own.</p>
<p>These exception classes that you have been provided with are
illustrated in the class hierarchy shown below (note that the notations
used in the diagram are from UML - something that you will be studying
in the Software Engineering unit !)</p>
<p><img
src="02%20Error%20Handling%20in%20Java/images/inheritance.jpg" /></p>
<p><strong>Hints &amp; Tips:</strong><br />
Make sure you have a solid grasp of these concepts before moving on to
the next section. In the following tasks you will get the opportunity to
use the exceptions illustrated above to implement error handling in your
OXO game.</p>
<h1 id="section-1"></h1>
<h3 id="task-3-error-handling-in-practice">Task 3: Error Handling in
Practice</h3>
<p><a href='03%20Error%20Handling%20in%20Practice/slides/segment-1.pdf' target='_blank'>
<img src="../../resources/icons/slides.png" /> </a>
<a href='03%20Error%20Handling%20in%20Practice/video/segment-1.mp4' target='_blank'>
<img src="../../resources/icons/video.png" /> </a></p>
<p>Now that you have a high-level understanding of Java’s exception
handling mechanism and an appreciation of the range of input error a
user might make, let us use this information to actually implement error
handling in the OXO game. Take a look at the slides and video linked to
above to find out how to work with exceptions in Java.</p>
<p>With the knowledge you have gained from the above, implement error
handling in your <code>OXOController</code> class. Add appropriate input
checking features to your <code>handleIncomingCommand</code> method to
determine whether or not the specified cell identifier is can be
accepted: - If the identifier is acceptable, mark the specified cell as
being owned by the player as normal. - If the identifier is
unacceptable, prevent the move from taking place and instead instantiate
and ‘throw’ the relevant exception (depending on the type of input error
that has been made).</p>
<p>The <code>OXOGame</code> will ‘catch’ any exceptions that the
<code>OXOController</code> has ‘thrown’ and will print out a relevant
error message to the terminal/console as feedback to the user.</p>
<p>Test your program manually by playing a game and entering a range of
erroneous inputs, making sure that all errors are trapped and reported
correctly.</p>
<p><strong>Hints &amp; Tips:</strong><br />
Note that in order to be able to access all of the OXO move exceptions
introduced in the previous section, you will need to
<code>import edu.uob.OXOMoveException.*;</code> at the top of your
controller class.</p>
<p>You may assume a maximum grid size of 9x9 (rows
<code>a</code>-<code>i</code> and columns <code>1</code>-<code>9</code>)
so that a cell identifier can ONLY ever be two characters long. Note
that your code should accept upper as well as lower case row characters
(e.g. <code>A1</code> and <code>a1</code> are equivalent and both are
acceptable).</p>
<h1 id="section-2"></h1>
<h3 id="task-4-testing-exceptions">Task 4: Testing Exceptions</h3>
<p>As we have discuss previously, automated testing is a key practice in
Software Engineering. It is time for you to start applying this practice
more extensively in your own work. To this end, you should add a set of
additional test cases to your automated testing script that will trigger
(and then check) all of the different types of OXO move exception
discussed in the previous section.</p>
<p>There are a number of different ways to do this - perhaps the
simplest is to use the <code>assertThrows</code> assertion. We pass this
assertion a particular method to call and an exception that we expect to
be thrown. If the method does NOT cause the exception, then JUnit will
report that the test has failed. For example, we could check to make
sure that the user input command <code>aa1</code> results in an
<code>InvalidIdentifierLengthException</code> using the following
code:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">assertThrows</span><span class="op">(</span>InvalidIdentifierLengthException<span class="op">.</span><span class="fu">class</span><span class="op">,</span> <span class="op">()-&gt;</span> controller<span class="op">.</span><span class="fu">handleIncomingCommand</span><span class="op">(</span><span class="st">&quot;aa1&quot;</span><span class="op">));</span></span></code></pre></div>
<p>There are a couple of things to note about this code:</p>
<p>Firstly, it is important that we pass in the
<code>InvalidIdentifierLengthException</code> <em>class</em> rather than
an <em>instance</em> (object) of that class. This is because we want
JUnit to check that an instance of the
<code>InvalidIdentifierLengthException</code> class has been thrown, but
we don’t care <em>which</em> instance (in fact we have no way of
predicting which instance has been created).</p>
<p>Secondly, the expression <code>()-&gt;</code> might look a little bit
strange, but it is in fact correct Java syntax !<br />
This element is called a <strong>lambda</strong> and it allows us to
“bundle up” a method to pass into <code>assertThrows</code>: -
<em>WITHOUT</em> <code>()-&gt;</code> the code above would run the
<code>handleIncomingCommand</code> method first, and then pass the
<em>result returned</em> into <code>assertThrows</code>. If an error is
encountered, an exception will be thrown <em>before</em> the
<code>handleIncomingCommand</code> method returns, and as a result there
will be <em>nothing</em> to pass into <code>assertThrows</code>. -
<em>WITH</em> <code>()-&gt;</code> the code above passes the entire
<code>handleIncomingCommand</code> method into
<code>assertThrows</code>, so that <code>assertThrows</code> can then
call it. If an error is encountered, an exception will be thrown
<em>inside</em> <code>assertThrows</code> so that it is able to detect
and check that it is of the correct type.</p>
<p>A subtle, yet important distinction !</p>
<h1 id="section-3"></h1>
<h3 id="task-5-win-threshold">Task 5: Win Threshold</h3>
<p>The ‘Win Threshold’ is the number of cells in a row required to win a
match (3 in a “standard” game). It would make for a more interesting
game if it were possible to change this threshold during a game. To
support this feature, the <code>OXOGame</code> class includes
interaction features to allow the user to alter the win threshold: -
Pressing the <code>+</code> key on the keyboard should increase the win
threshold - Pressing the <code>-</code> key on the keyboard should
decrease the win threshold</p>
<p>Although the <code>OXOGame</code> class is able to detect the
pressing of the <code>+</code> and <code>-</code> keys, the internal win
threshold is currently not updated. The
<code>increaseWinThreshold</code> and <code>decreaseWinThreshold</code>
methods inside <code>OXOController</code> are called when the keys are
pressed, however these two methods are currently empty, so pressing the
keys has no effect. Add code to the <code>increaseWinThreshold</code>
and <code>decreaseWinThreshold</code> methods in your
<code>OXOController</code> so that they alter the win threshold value
held inside the <code>OXOModel</code> (by calling the relevant “getter”
and “setter” methods).</p>
<p>You should make your code as robust as possible, preventing the data
held in the model from getting into any undesirable states. Your
controller must adhere to the following rules: - The minimum win
threshold should be 3 (a game with a lower threshold is going to be
pretty pointless !). - The maximum win threshold should be the current
size of the board (which ever is smaller: width or height). - Users
should NOT be able to <em>reduce</em> the win threshold during a game
(only at beginning). - It should be possible to increase the win
threshold at any point during the game, except that… - The win threshold
should NOT be changed after a win - gameplay should cease when someone
has won !</p>
<p>Note that you should NOT alter the win threshold when the game is
reset (i.e. when the <code>ESC</code> key is pressed). It is up the the
players to choose the win threshold for the next game. You should also
ensure that all game state is stored in the <code>OXOModel</code> and
NOT in your <code>OXOController</code>.</p>
<p>Be sure to add suitable test cases to your test scripts in order to
fully test the variable win threshold features (including checking that
the controller maintains the threshold according to the rules specified
above).</p>
<h1 id="section-4"></h1>
<h3 id="task-6-more-players">Task 6: More Players</h3>
<p>Although two players in the traditional number in an OXO game,
allowing additional players would make for a more interesting game. As
an extension to the standard game, add features to your code so that it
can support any number of players. To achieve this you will need to make
changes to both the <code>OXOModel</code> as well as your
<code>OXOController</code>. You will need to use alternative player
characters for the additional players - having more than one player
who’s letter is X will lead to a lot of confusion !</p>
<p>You should NOT attempt to alter the <code>OXOView</code> or
<code>OXOGame</code> to allow the <em>interactive</em> setting of the
number of players. Instead, you should focus on testing multi-player
games by creating additional test cases in your testing script.</p>
<p>Remember to try to ensure that your code is flexible versatile (don’t
hard-wire in any fixed values) !</p>
<h1 id="section-5"></h1>
</body>
</html>
